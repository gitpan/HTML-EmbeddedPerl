<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>HTML::EmbeddedPerl - The Perl embeddings for HTML.</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:root@localhost" />
</head>

<body style="background-color: white">


<!-- INDEX BEGIN -->
<div name="index">
<p><a name="__index__"></a></p>

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#synopsys">SYNOPSYS</a></li>
	<ul>

		<li><a href="#run_in_the_automatically">run in the automatically</a></li>
		<li><a href="#using_in_the_script">using in the script</a></li>
	</ul>

	<li><a href="#description">DESCRIPTION</a></li>
	<ul>

		<li><a href="#modperl2">modperl2</a></li>
		<li><a href="#cgi">cgi</a></li>
		<li><a href="#wrapper">wrapper</a></li>
	</ul>

	<li><a href="#timeout">TIMEOUT</a></li>
	<ul>

		<li><a href="#modperl2">modperl2</a></li>
		<li><a href="#cgi">cgi</a></li>
		<li><a href="#wrapper">wrapper</a></li>
	</ul>

	<li><a href="#beta_features">BETA Features</a></li>
	<li><a href="#reserved">RESERVED</a></li>
	<ul>

		<li><a href="#subroutines">Subroutines</a></li>
		<li><a href="#variables">Variables</a></li>
	</ul>

	<li><a href="#author">AUTHOR</a></li>
	<li><a href="#lisence">LISENCE</a></li>
</ul>

<hr name="index" />
</div>
<!-- INDEX END -->

<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>HTML::EmbeddedPerl - The Perl embeddings for HTML.</p>
<p>
</p>
<hr />
<h1><a name="synopsys">SYNOPSYS</a></h1>
<p>recommends run on <em>automatic</em>.</p>
<p>
</p>
<h2><a name="run_in_the_automatically">run in the automatically</a></h2>
<p>passing of instanced object <strong>$epl</strong>.
that are reference of <strong>Apache::RequestRec</strong><em>(modperl)</em> or <strong>__PACKAGE__</strong><em>(cgi)</em>.
example of use in the code tags.</p>
<pre>
  # output header ($key,$value)
  $epl-&gt;header_out('Content-Type','text/html');
  # set of contents type, default is 'text/html', output forcing.
  $epl-&gt;content_type('text/html');</pre>
<p>
</p>
<h2><a name="using_in_the_script">using in the script</a></h2>
<pre>
  $htm = something;</pre>
<pre>
  use HTML::EmbeddedPerl;
  $e = HTML::EmbeddedPerl-&gt;new();</pre>
<pre>
  # output header ($key,$value)
  $e-&gt;header_out('Content-Create','foo');
  # set of contents type, default is 'text/html'
  $e-&gt;content_type('text/plain');</pre>
<pre>
  # flushing header and contents. (example 1)
  $e-&gt;ep(\$htm);</pre>
<pre>
  # not flushing header, return contents to $r.
  $r = $e-&gt;ep(\$htm);</pre>
<pre>
  # flushing HTTP header.
  $e-&gt;flush;
  # same above. (example 1)
  print $r;</pre>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p>The Perl-Code embeddings for HTML, it is simple and easy.</p>
<p>adding <em>&lt;$ Perl-Code $&gt;</em> to your HTML.
if code blocks too many, cannot use local variables between code blocks.</p>
<p>
</p>
<h2><a name="modperl2">modperl2</a></h2>
<p>if you want not use of global variables, please use <strong>$var</strong>.
destruct <strong>$var</strong> after execute.
but it can use between multiple tags too.</p>
<pre>
  &lt;FilesMatch &quot;.*\.phtml?$&quot;&gt;
  SetHandler modperl
  PerlResponseHandler HTML::EmbeddedPerl
  PerlOptions +ParseHeaders
  &lt;/FilesMatch&gt;</pre>
<p>for most compatibility, use <em>PerlResponseHandler perl-script</em>.</p>
<p>
</p>
<h2><a name="cgi">cgi</a></h2>
<p>inserting first line to</p>
<pre>
  #!/your/path/twepl</pre>
<p>
</p>
<h2><a name="wrapper">wrapper</a></h2>
<p>if you cannot use twepl? but wrapper.pl is available.</p>
<pre>
  AddType application/x-embedded-perl .phtml
  AddHandler application/x-embedded-perl .phtml
  Action application/x-embedded-perl /your/path/wrapper</pre>
<p>
</p>
<hr />
<h1><a name="timeout">TIMEOUT</a></h1>
<p>force exiting over the timeout for loop detection.
<strong>$TIMEOUT</strong> is global, please change it overwritten.</p>
<pre>
  # default is &quot;2&quot; seconds.
  $TIMEOUT = 2;</pre>
<p>already executing under alarm, cannot change that timeout.</p>
<pre>
  # set as new timeout.
  alarm($TIMEOUT);
  # cancelling timeout.
  alarm(0);</pre>
<p>
</p>
<h2><a name="modperl2">modperl2</a></h2>
<pre>
  $TIMEOUT = X;
  # cancelling timeout and unset timeout.
  alarm(($TIMEOUT=0));</pre>
<p>
</p>
<h2><a name="cgi">cgi</a></h2>
<pre>
  # set as new timeout.
  alarm(X);</pre>
<p>
</p>
<h2><a name="wrapper">wrapper</a></h2>
<p>before calling sub <strong>ep()</strong></p>
<pre>
  $HTML::EmbeddedPerl::TIMEOUT = X;</pre>
<p>
</p>
<hr />
<h1><a name="beta_features">BETA Features</a></h1>
<p>replace variables on non-code blocks. <em>(not a reference) scalar</em> only.</p>
<p>
</p>
<hr />
<h1><a name="reserved">RESERVED</a></h1>
<p>it tiny-tiny solving <strong>cgi</strong>-<strong>modperl</strong> compatibility.</p>
<p>
</p>
<h2><a name="subroutines">Subroutines</a></h2>
<p>base.</p>
<pre>
  ep
  handler
  new</pre>
<p>for cgi interface.
other <strong>Subs</strong> define it freely.</p>
<pre>
  header_out
  content_type
  print
  flush</pre>
<p>for modperl, run in the depends <strong>Apache::RequestRec</strong> and more.</p>
<p>
</p>
<h2><a name="variables">Variables</a></h2>
<pre>
  $TIMEOUT(global)
  $epl
  $var</pre>
<p>
</p>
<hr />
<h1><a name="author">AUTHOR</a></h1>
<p>Twinkle Computing &lt;<a href="mailto:twinkle@cpan.org">twinkle@cpan.org</a>&gt;</p>
<p>
</p>
<hr />
<h1><a name="lisence">LISENCE</a></h1>
<p>Copyright (c) 2010 Twinkle Computing All rights reserved.</p>
<p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>

</body>

</html>
