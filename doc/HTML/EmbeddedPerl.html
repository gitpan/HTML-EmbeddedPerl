<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="Content-Script-Type" content="text/css" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<title>HTML::EmbeddedPerl - The Perl embeddings for HTML</title>
<style type="text/css"><!--
h1{padding:3px;color:#069;background-color:#cef;font-size:120%;font-weight:bolder;}
h2{color:#069;font-size:100%;font-weight:bold;}
blockquote{margin:8px;padding:8px;border:solid 1px #9bd;background-color:#eff9ff;}
.b{font-weight:bold;}
.i{font-style:italic;}
--></style></head>
<body>
<h1>HTML::EmbeddedPerl - The Perl embeddings for HTML</h1>
<a id="___top" name="___top">
<h2>INDEX</h2>
<p>
&nbsp;&nbsp;&nbsp;<a href="#NAME">NAME</a><br />&nbsp;&nbsp;&nbsp;<a href="#SYNOPSYS">SYNOPSYS</a><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#run_in_the_automatically">run in the automatically</a><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#using_in_the_script">using in the script</a><br />&nbsp;&nbsp;&nbsp;<a href="#DESCRIPTION">DESCRIPTION</a><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#DESCRIPTION_mod_perl2">mod_perl2</a><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#DESCRIPTION_CGI">CGI</a><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#DESCRIPTION_Wrapper">Wrapper</a><br />&nbsp;&nbsp;&nbsp;<a href="#TIMEOUT">TIMEOUT</a><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#TIMEOUT_mod_perl2">mod_perl2</a><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#TIMEOUT_CGI">CGI</a><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#TIMEOUT_Wrapper">Wrapper</a><br />&nbsp;&nbsp;&nbsp;<a href="#INTERNAL_METHODS">INTERNAL METHODS</a><br />&nbsp;&nbsp;&nbsp;<a href="#BASIC_METHODS">BASIC METHODS</a><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ep">ep</a><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#new">new</a><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#flush">flush</a><br />&nbsp;&nbsp;&nbsp;<a href="#COMPATIBLE_METHODS">COMPATIBLE METHODS</a><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#header_out">header_out</a><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#content_type">content_type</a><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#print">print</a><br />&nbsp;&nbsp;&nbsp;<a href="#OTHER_METHODS">OTHER METHODS</a><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#OTHER_METHODS_mod_perl2">mod_perl2</a><br />&nbsp;&nbsp;&nbsp;<a href="#EXPORTS">EXPORTS</a><br />&nbsp;&nbsp;&nbsp;<a href="#OPTIONS">OPTIONS</a><br />&nbsp;&nbsp;&nbsp;<a href="#COMMENTS">COMMENTS</a><br />&nbsp;&nbsp;&nbsp;<a href="#BETA_Features">BETA Features</a><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Boolean_Expression">Boolean Expression</a><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Extract_Array">Extract Array</a><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Extract_Hash">Extract Hash</a><br />&nbsp;&nbsp;&nbsp;<a href="#AUTHOR">AUTHOR</a><br />&nbsp;&nbsp;&nbsp;<a href="#COPYRIGHT">COPYRIGHT</a><br />&nbsp;&nbsp;&nbsp;<a href="#LISENCE">LISENCE</a><br />
</p>
<a id="NAME"></a><h1>NAME <a href="#___top">&uarr;</a></h1>
<p>
HTML::EmbeddedPerl - The Perl embeddings for HTML.
</p>
<a id="SYNOPSYS"></a><h1>SYNOPSYS <a href="#___top">&uarr;</a></h1>
<p>
<span class="i">automatic</span>.
</p>
<a id="run_in_the_automatically"></a><h2>run in the automatically</h2>
<p>
passing of instanced object <span class="b">$ep</span>.<br />
that are reference of <span class="b">Apache::RequestRec</span><span class="i">(modperl)</span> or <span class="b">__PACKAGE__</span><span class="i">(cgi)</span>.<br />
example of use in the code tags.
</p>
<blockquote>
<span style="color:#080;"># set output header ($key,$value)</span><br />
<span style="color:#f80;">$ep</span>-&gt;header_out(<span style="color:#488;">'Content-Create'</span>,<span style="color:#488;">'foo'</span>);<br />
<span style="color:#080;"># set of contents type, default is 'text/html', output forcing.</span><br />
<span style="color:#f80;">$ep</span>-&gt;content_type(<span style="color:#488;">'text/plain'</span>);
</blockquote>
<p>
if you want not use of global variables, please use <span class="b">$ev</span>.<br />
destruct <span class="b">$ev</span> after execute.<br />
but it can use between multiple tags too.<br />
</p>
<a id="using_in_the_script"></a><h2>using in the script</h2>
<blockquote>
<span style="color:#f80;">$htm</span> = something;<br />
<br />
<span style="color:#00f;">use</span> HTML::EmbeddedPerl;<br />
<span style="color:#f80;">$e</span> = HTML::EmbeddedPerl-&gt;<span style="color:#00f;">new</span>();<br />
<br />
<span style="color:#080;"># set output header ($key,$value)</span><br />
<span style="color:#f80;">$e</span>-&gt;header_out(<span style="color:#488;">'Content-Create'</span>,<span style="color:#488;">'foo'</span>);<br />
<span style="color:#080;"># set of contents type, default is 'text/html'</span><br />
<span style="color:#f80;">$e</span>-&gt;content_type(<span style="color:#488;">'text/plain'</span>);<br />
<br />
<span style="color:#080;"># flushing header and contents. (example 1)</span><br />
<span style="color:#f80;">$e</span>-&gt;ep(<span style="color:#f80;">\$htm</span>);<br />
<br />
<span style="color:#080;"># not flushing header, return contents to $r.</span><br />
<span style="color:#f80;">$r</span> = <span style="color:#f80;">$e</span>-&gt;ep(<span style="color:#f80;">\$htm</span>);<br />
<br />
<span style="color:#080;"># flushing HTTP header.</span><br />
<span style="color:#f80;">$e</span>-&gt;flush;<br />
<span style="color:#080;"># same above. (example 1)</span><br />
<span style="color:#00f;">print</span> <span style="color:#f80;">$r</span>;<br />
</blockquote>
<a id="DESCRIPTION"></a><h1>DESCRIPTION <a href="#___top">&uarr;</a></h1>
<p>
The Perl-Code embeddings for HTML, it is simple and easy.<br />
adding <span class="i">&lt;$ Perl-Code $&gt;</span> to your HTML.<br />
</p>
<a id="DESCRIPTION_mod_perl2"></a><h2>mod_perl2</h2>
<p>
write <span class="b">httpd.conf</span> or <span class="b">.htaccess</span>.
</p>
<blockquote>
&lt;FilesMatch <span style="color:#804;">&quot;.*\.phtml?$&quot;</span>&gt;<br />
<span style="color:#080;"># Output Mode - 0..5, see OPTIONS section.</span><br />
PerlSetEnv OUTMODE <span style="color:#e00;">0</span><br />
SetHandler modperl<br />
PerlResponseHandler HTML::EmbeddedPerl<br />
PerlOptions +ParseHeaders<br />
&lt;/FilesMatch&gt;
</blockquote>
<p>
needs most compatibility, use <span class="i">PerlResponseHandler perl-script</span>.
</p>
<a id="DESCRIPTION_CGI"></a><h2>CGI</h2>
<p>
inserting first line to
</p>
<blockquote>
<span style="color:#080;">#!/your/path/twepl</span>
</blockquote>
<a id="DESCRIPTION_Wrapper"></a><h2>Wrapper</h2>
<p>
if you cannot use twepl? but wrapper.pl is available.<br />
write <span class="b">.htaccess</span>.
</p>
<blockquote>
AddType application/x-embedded-perl .phtml<br />
AddHandler application/x-embedded-perl .phtml<br />
Action application/x-embedded-perl /your/path/wrapper
</blockquote>
<a id="TIMEOUT"></a><h1>TIMEOUT <a href="#___top">&uarr;</a></h1>
<p>
force exiting over the timeout for loop detection.<br />
<span class="b">$TIMEOUT</span> is global, please change it overwritten.
</p>
<blockquote>
<span style="color:#080;"># default is &quot;2&quot; seconds.</span><br />
<span style="color:#f80;">$TIMEOUT</span> = <span style="color:#e00;">2</span>;
</blockquote>
<p>
already executing under alarm, cannot change that timeout.
</p>
<blockquote>
<span style="color:#080;"># set as new timeout.</span><br />
<span style="color:#00f;">alarm</span>(X);<br />
<span style="color:#080;"># cancelling timeout.</span><br />
<span style="color:#00f;">alarm</span>(0);
</blockquote>
<a id="TIMEOUT_mod_perl2"></a><h2>mod_perl2</h2>
<blockquote>
<span style="color:#080;"># set as new timeout.</span><br />
<span style="color:#00f;">alarm</span>((<span style="color:#f80;">$TIMEOUT</span>=X));<br />
<span style="color:#080;"># cancelling timeout and unset timeout.</span><br />
<span style="color:#00f;">alarm</span>((<span style="color:#f80;">$TIMEOUT</span>=0));
</blockquote>
<a id="TIMEOUT_CGI"></a><h2>CGI</h2>
<blockquote>
<span style="color:#080;"># set as new timeout.</span><br />
<span style="color:#00f;">alarm</span>(X);<br />
</blockquote>
<a id="TIMEOUT_Wrapper"></a><h2>Wrapper</h2>
<p>
before calling sub <span class="b">ep()</span>
</p>
<blockquote>
<span style="color:#f80;">$HTML::EmbeddedPerl::TIMEOUT</span> = X;
</blockquote>
<a id="INTERNAL_METHODS"></a><h1>INTERNAL METHODS <a href="#___top">&uarr;</a></h1>
<blockquote>
_coloring<br />
_extract_hash<br />
_extract_array<br />
_init<br />
_run<br />
<br />
handler
</blockquote>
<a id="BASIC_METHODS"></a><h1>BASIC METHODS <a href="#___top">&uarr;</a></h1>
<a id="ep"></a><h2>ep</h2>
<blockquote>
ep(<span style="color:#f80;">$string</span>,<span style="color:#f80;">$option</span>);
</blockquote>
<a id="new"></a><h2>new</h2>
<blockquote>
<span style="color:#f80;">$ep</span> = HTML::EmbeddedPerl-&gt;<span style="color:#00f;">new</span>();
</blockquote>
<a id="flush"></a><h2>flush</h2>
<p>
flushing HTTP header.
</p>
<blockquote>
<span style="color:#f80;">$ep</span>-&gt;flush;
</blockquote>
<a id="COMPATIBLE_METHODS"></a><h1>COMPATIBLE METHODS <a href="#___top">&uarr;</a></h1>
<p>
it tiny-tiny solving <span class="b">cgi</span>-<span class="b">modperl</span> compatibility methods.<br />
use that $ep-&gt;<span class="b">method</span> <span class="i">*inner code tags only</span>.
</p>
<a id="header_out"></a><h2>header_out</h2>
<blockquote>
<span style="color:#f80;">$ep</span>-&gt;header_out(<span style="color:#f80;">$key</span>,<span style="color:#f80;">$val</span>);
</blockquote>
<a id="content_type"></a><h2>content_type</h2>
<blockquote>
<span style="color:#f80;">$ep</span>-&gt;content-type(<span style="color:#f80;">$type</span>);
</blockquote>
<a id="print"></a><h2>print</h2>
<blockquote>
<span style="color:#f80;">$ep</span>-&gt;<span style="color:#00f;">print</span>(<span style="color:#f80;">$string</span>);
</blockquote>
<a id="OTHER_METHODS"></a><h1>OTHER METHODS <a href="#___top">&uarr;</a></h1>
<p>
other methods define it freely.
</p>
<a id="OTHER_METHODS_mod_perl2"></a><h2>mod_perl2</h2>
<p>
depends <span class="b">Apache::RequestRec</span> and more.
</p>
<a id="EXPORTS"></a><h1>EXPORTS <a href="#___top">&uarr;</a></h1>
<p>
ep(<span class="b">string</span>,<span class="b">option</span>)<br />
</p>
<a id="OPTIONS"></a><h1>OPTIONS <a href="#___top">&uarr;</a></h1>
<p>
<span class="b">0</span> = default, execute only once.<br />
<span class="b">1</span> =<span class="i">-- with coloring source</span>.<br />
<span class="b">2</span> = older version compatible, every tags every execute.<br />
<span class="b">3</span> =<span class="i">-- with coloring source</span>.<br />
<span class="b">4</span> = output internal code.<br />
<span class="b">5</span> =<span class="i">-- with coloring source</span>.
</p>
<a id="COMMENTS"></a><h1>COMMENTS <a href="#___top">&uarr;</a></h1>
<p>
<span class="b">#</span> comments<br />
<span class="b">//</span> comments<br />
<span class="b">/*</span> comments <span class="b">*/</span>
</p>
<p>
recommended use <span class="b">/* */</span> and please do not put comments in the same line as the code if possible.<br />
</p>
<a id="BETA_Features"></a><h1>BETA Features <a href="#___top">&uarr;</a></h1>
<p>
case of extract scalar in non-code blocks.
</p>
<blockquote>
&lt;$ <span style="color:#00f;">my</span> <span style="color:#f80;">$scalar</span> = <span style="color:#488;">'this is scalar'</span>; $&gt;<br />
&lt;p&gt;<span style="color:#f80;">$scalar</span>&lt;/p&gt;<br />
...<br />
&lt;p&gt;this is <span style="color:#00f;">scalar</span>&lt;/p&gt;<br />
<br />
<span style="color:#00f;">if</span> you want not extract vars, please <span style="color:#00f;">use</span> escape sequence <span class="b">'\'</span>.<br />
<br />
&lt;p&gt;<span style="color:#f80;">\$scalar</span>&lt;/p&gt;<br />
...<br />
&lt;p&gt;<span style="color:#f80;">$scalar</span>&lt;/p&gt;
</blockquote>
<p>
and available simple template.
</p>
<a id="Boolean_Expression"></a><h2>Boolean Expression</h2>
<p>
&lt;!=<span class="b">EXPRESSION</span>&gt;...&lt;/!&gt;<br />
replace inner <span class="b">&lt;!</span>&gt; to else, &lt;!=<span class="b">EXPRESSION</span>&gt; to elsif.
</p>
<blockquote>
&lt;$ <span style="color:#00f;">my</span> <span style="color:#f80;">$flag</span> = <span style="color:#e00;">1</span>; <span style="color:#00f;">my</span> <span style="color:#f80;">$oops</span> = <span style="color:#488;">'oops!'</span>; $&gt;<br />
&lt;!=<span style="color:#f80;">$flag</span>&gt;&lt;p&gt;<span style="color:#f80;">$flag</span>&lt;/p&gt;&lt;!&gt;&lt;p&gt;<span style="color:#f80;">$oops</span>&lt;/p&gt;&lt;/!&gt;<br />
...<br />
&lt;p&gt;<span style="color:#e00;">1</span>&lt;/p&gt;
</blockquote>
<p>
<span class="b">&gt;</span> is same a tag-close, try <span class="b">($a &gt; $b)</span> in compilation errors.
</p>
<a id="Extract_Array"></a><h2>Extract Array</h2>
<p>
&lt;@=<span class="b">ARRAYNAME</span>&gt;...&lt;/@&gt;, extract value is <span class="b">$_</span>.<br />
<span class="b">ARRAYNAME</span> can use reference <span class="b">{ARRAYNAME}</span> or <span class="b">\ARRAYNAME</span>.
</p>
<p>
<span class="b">$n</span> = current array name.<br />
<span class="b">$i</span> = current position.<br />
<span class="b">$c</span> = equals scalar @array;
</p>
<p>
and <span class="b">$XXX</span> = want vars.
</p>
<blockquote>
&lt;$ <span style="color:#00f;">my</span> <span style="color:#f80;">@array</span> = (<span style="color:#488;">'a'</span>..<span style="color:#488;">'c'</span>); $&gt;<br />
&lt;@=array&gt;&lt;p&gt;<span style="color:#f80;">$i:</span> <span style="color:#f80;">$_</span>&lt;/p&gt;\n&lt;/@&gt;<br />
...<br />
&lt;p&gt;<span style="color:#e00;">0</span>: a&lt;/p&gt;<br />
&lt;p&gt;<span style="color:#e00;">1</span>: b&lt;/p&gt;<br />
&lt;p&gt;<span style="color:#e00;">2</span>: c&lt;/p&gt;
</blockquote>
<a id="Extract_Hash"></a><h2>Extract Hash</h2>
<p>
&lt;%=<span class="b">HASHNAME</span>&gt;...&lt;/%&gt;, extract key is <span class="b">$k</span>, value is <span class="b">$v</span>.<br />
<span class="b">HASHNAME</span> can use reference <span class="b">{HASHNAME}</span> or <span class="b">\HASHNAME</span>.
</p>
<p>
<span class="b">$n</span> = current hash name.<br />
<span class="b">$c</span> = equals scalar keys %hash;
</p>
<p>
and <span class="b">$XXX</span> = want vars.<br />
</p>
<blockquote>
&lt;$ <span style="color:#00f;">my</span> <span style="color:#f80;">%hash</span> = (<span style="color:#488;">'a'</span>=&gt;1,<span style="color:#488;">'b'</span>=&gt;2,<span style="color:#488;">'c'</span>=&gt;<span style="color:#e00;">3</span>); $&gt;<br />
&lt;table&gt;<br />
&lt;%=hash&gt;&lt;tr&gt;&lt;th&gt;<span style="color:#f80;">$k</span>&lt;/th&gt;&lt;td&gt;<span style="color:#f80;">$v</span>&lt;/td&gt;&lt;/tr&gt;\n&lt;/%&gt;<br />
&lt;/table&gt;<br />
...<br />
&lt;table&gt;<br />
&lt;tr&gt;&lt;th&gt;a&lt;/th&gt;&lt;td&gt;<span style="color:#e00;">1</span>&lt;/td&gt;&lt;tr&gt;<br />
&lt;tr&gt;&lt;th&gt;b&lt;/th&gt;&lt;td&gt;<span style="color:#e00;">2</span>&lt;/td&gt;&lt;tr&gt;<br />
&lt;tr&gt;&lt;th&gt;c&lt;/th&gt;&lt;td&gt;<span style="color:#e00;">3</span>&lt;/td&gt;&lt;tr&gt;<br />
&lt;/table&gt;
</blockquote>
<a id="AUTHOR"></a><h1>AUTHOR <a href="#___top">&uarr;</a></h1>
<p>
Twinkle Computing <a href="mailto:twinkle@cpan.org">&lt;twinkle@cpan.org&gt;</a>
</p>
<a id="COPYRIGHT"></a><h1>COPYRIGHT <a href="#___top">&uarr;</a></h1>
<p>
Copyright (c) 2010 Twinkle Computing All rights reserved.
</p>
<a id="LISENCE"></a><h1>LISENCE <a href="#___top">&uarr;</a></h1>
<p>
This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.
</p>
</body></html>
